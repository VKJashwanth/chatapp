(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{9073:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rooms/[id]",function(){return c(1408)}])},1408:function(a,b,c){"use strict";function d(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function e(a){return function(a){if(Array.isArray(a))return d(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||function(a,b){if(a){if("string"==typeof a)return d(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return d(a,b)}}(a)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}c.r(b),c.d(b,{default:function(){return j}});var f=c(5893),g=c(2194),h=c(1163),i=c(7294);function j(){var a=(0,h.useRouter)(),b=(0,i.useState)(null),c=b[0],d=b[1],j=(0,i.useState)([]),k=j[0],l=j[1],m=(0,i.useState)([]),n=m[0],o=m[1],p=(0,g.Rc)().connection;(0,i.useEffect)(function(){if(p)return p.off("message").on("message",function(a){o(function(b){return e(b).concat([a])})}),function(){p.off("message",function(a){o(function(b){return e(b).concat([a])})})}},[p]),(0,i.useEffect)(function(){if(p){var b=function(b){b.success||a.push("/rooms"),d(b.data)},c=function(b){b.success||a.push("/rooms"),l(b.data)};return p.emit("roomMembers"),p.on("roomMembers",c),p.emit("fetchRoom"),p.on("fetchRoom",b),function(){p.off("roomMembers",c),p.off("fetchRoom",b)}}},[p,a]);var q=function(){p.emit("leaveRoom"),p.on("leaveRoom",function(b){b.success&&a.push("/rooms")})},r=function(a){var b=new Date,c=new Date(a);if(b-c<6e4)return 1===Math.floor((b-c)/1e3)?Math.floor((b-c)/1e3)+" seconds ago":"now";if(b.getDate()===c.getDate()&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()){var d=Math.floor((b.getTime()-c.getTime())/1e3/60);return"".concat(d," minutes ago")}if(b.getDate()===c.getDate()&&b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()){var e=Math.floor((b.getTime()-c.getTime())/1e3/60/60);return"".concat(e," hours ago")}if(b.getMonth()===c.getMonth()&&b.getFullYear()===c.getFullYear()){var f=Math.floor((b.getTime()-c.getTime())/1e3/60/60/24);return"".concat(f," days ago")}if(b.getFullYear()===c.getFullYear()){var g=Math.floor((b.getTime()-c.getTime())/1e3/60/60/24/30);return"".concat(g," months ago")}else{var h=Math.floor((b.getTime()-c.getTime())/1e3/60/60/24/30/12);return"".concat(h," years ago")}};return(0,f.jsx)(f.Fragment,{children:(0,f.jsxs)("div",{className:"grid grid-cols-12",children:[(0,f.jsxs)("div",{className:"col-span-9 w-full",children:[(0,f.jsxs)("div",{className:"border-b border-zinc-500/5 flex items-center justify-between px-6 py-5 text-white",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("img",{src:"https://avatars.dicebear.com/api/initials/".concat((null==c?void 0:c.name)||"No Name",".png"),alt:"username",className:"w-14 h-14 rounded-full"}),(0,f.jsxs)("div",{className:"ml-3",children:[(0,f.jsx)("p",{className:"text-lg font-medium",children:null==c?void 0:c.name}),(0,f.jsxs)("p",{className:"text-xs font-medium italic text-gray-500",children:[null==k?void 0:k.length," members"]})]})]}),(0,f.jsx)("div",{className:"flex items-center",children:(0,f.jsx)("button",{onClick:q,className:"bg-zinc-500/10 hover:bg-zinc-500/20 rounded-full p-2 mr-2",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:(0,f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})})]}),(0,f.jsx)("div",{className:"px-6 py-5 max-h-[80%] overflow-auto",children:(0,f.jsx)("div",{className:"flex flex-col space-y-4",children:n.filter(Boolean).filter(function(a){return!!a.system||!!a.user|| !!a.message&&!!(a.message.length>0)}).map(function(a,b){var c,d;return a.system?(0,f.jsx)("div",{className:"flex justify-center items-center",children:(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.message})},b):a.self?(0,f.jsxs)("div",{className:"flex justify-end items-center gap-2",children:[(0,f.jsxs)("div",{className:"flex flex-col items-end",children:[(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.user.username}),(0,f.jsx)("div",{className:"bg-zinc-500/10 rounded-xl p-3",children:(0,f.jsx)("p",{className:"text-sm text-white",children:a.message})}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:r(a.date)})]}),(0,f.jsx)("img",{src:"https://avatars.dicebear.com/api/micah/".concat((null===(c=a.user)|| void 0===c?void 0:c.username)||"No Name",".png"),alt:"username",className:"w-10 h-10 rounded-full"})]},b):(0,f.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,f.jsx)("img",{src:"https://avatars.dicebear.com/api/micah/".concat((null===(d=a.user)|| void 0===d?void 0:d.username)||"No Name",".png"),alt:"username",className:"w-10 h-10 rounded-full"}),(0,f.jsxs)("div",{className:"flex flex-col items-start",children:[(0,f.jsx)("p",{className:"text-xs text-gray-500",children:a.user.username}),(0,f.jsx)("div",{className:"bg-zinc-500/10 rounded-xl p-3",children:(0,f.jsx)("p",{className:"text-sm text-white",children:a.message})}),(0,f.jsx)("p",{className:"text-xs text-gray-500",children:r(a.date)})]})]},b)})})}),(0,f.jsx)("div",{className:"border-t border-zinc-500/5 px-6 py-5 fixed bottom-0 w-full max-w-[62.3%]",children:(0,f.jsx)("form",{onSubmit:function(a){a.preventDefault();var b=a.target.message.value;b&&(p.emit("message",{message:b}),a.target.message.value="")},children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)("input",{name:"message",type:"text",className:"bg-zinc-500/10 rounded-md w-full px-4 py-2 text-white outline-none",autoComplete:"off",placeholder:"Type a message..."}),(0,f.jsx)("button",{type:"submit",className:"bg-zinc-500/10 hover:bg-zinc-500/20 rounded-md p-2 ml-2 transition-all duration-200",children:(0,f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2",children:(0,f.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})})]}),(0,f.jsx)("div",{className:"col-span-3 border-l border-zinc-500/5 h-screen w-full",children:(0,f.jsx)("div",{className:"overflow-y-auto h-full p-3 space-y-2",children:null==k?void 0:k.map(function(a){var b;return(0,f.jsx)("div",{className:"flex items-center justify-between px-6 py-5 text-white bg-zinc-500/5 rounded-lg",children:(0,f.jsxs)("div",{className:"flex items-center w-full",children:[(0,f.jsx)("img",{src:"https://avatars.dicebear.com/api/micah/".concat((null==a?void 0:a.username)||"No Name",".png"),alt:"username",className:"w-10 h-10 rounded-full"}),(0,f.jsxs)("div",{className:"ml-3 flex items-center justify-between gap-2 w-full",children:[(0,f.jsx)("p",{className:"text-sm font-medium",children:null==a?void 0:a.username}),(null==c?void 0:null===(b=c.owner)|| void 0===b?void 0:b.username)===(null==a?void 0:a.username)&&(0,f.jsx)(f.Fragment,{children:(0,f.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,f.jsx)("p",{className:"text-sm font-medium uppercase font-semibold opacity-50",children:"Owner"})})})]})]})})})})})]})})}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=9073)}),_N_E=a.O()}])